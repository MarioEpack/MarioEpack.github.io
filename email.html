<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-mail</title>
    <link rel="stylesheet" type="text/css" href="https://kentico.github.io/custom-element-samples/shared/custom-element.css">
    <!-- Include jQuery library -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/kentico-cloud-delivery/_bundles/kentico-cloud-delivery-sdk.umd.min.js"></script>
	
    <!-- Include the Custom Elements API-->
    <script src="https://app.kenticocloud.com/js-api/custom-element.js"></script>
	
</head>

<body>
	<div class="body">
	<form>
	<input oninput="showEmail()" type="text" name="email_name" id="email_id"><span id=isValid></span><br>
	</form>	
</div>
	<script type="text/javascript">
		CustomElement.init((element, context) => {
			$("#email_id").val(element.value);
			console.log($("#email_id"));
		});	


		$(document).ready(function()

		{       
			$("#email_id").val("test");
			console.log($("#email_id"));
		});

		function showEmail() {
			console.log($("#email_id").val());
			$("#mail").text($("#email_id").val());
			$("#isValid").text(validateEmail($("#email_id").val()));
			CustomElement.setValue($("#email_id").val());
		}

		function validateEmail(email) {
    		var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    		return re.test(String(email).toLowerCase());
		}

	</script>
	<span id="mail"></span>
</body>


	
	